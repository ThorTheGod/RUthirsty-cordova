<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>é˜¿ç‹¸ AI å¯¹è¯æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        button {
            background: linear-gradient(135deg, rgba(79, 172, 254, 0.5) 0%, rgba(0, 242, 254, 0.5) 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 12px 24px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }
        .output {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            min-height: 50px;
            font-size: 18px;
            line-height: 1.6;
        }
        .context-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦Š é˜¿ç‹¸ AI å¯¹è¯ç³»ç»Ÿæµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š å½“å‰ä¸Šä¸‹æ–‡</h2>
            <div id="contextInfo" class="context-info">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-section">
            <h2>ğŸ­ ç‚¹å‡»å¯¹è¯æµ‹è¯•</h2>
            <button onclick="testClickDialogue()">ç”Ÿæˆç‚¹å‡»å¯¹è¯</button>
            <button onclick="testMultipleClicks()">è¿ç»­ç”Ÿæˆ10æ¬¡</button>
            <div id="clickOutput" class="output">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h2>â° æé†’å¯¹è¯æµ‹è¯•</h2>
            <button onclick="testReminderDialogue()">ç”Ÿæˆæé†’å¯¹è¯</button>
            <button onclick="testMultipleReminders()">è¿ç»­ç”Ÿæˆ10æ¬¡</button>
            <div id="reminderOutput" class="output">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h2>ğŸ‘‹ æ¬¢è¿å¯¹è¯æµ‹è¯•</h2>
            <button onclick="testWelcomeDialogue()">ç”Ÿæˆæ¬¢è¿å¯¹è¯</button>
            <div id="welcomeOutput" class="output">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h2>âœ… æ‰“å¡åå¯¹è¯æµ‹è¯•</h2>
            <button onclick="testAfterDrinkDialogue()">ç”Ÿæˆæ‰“å¡åå¯¹è¯</button>
            <div id="afterDrinkOutput" class="output">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h2>ğŸ“œ å¯¹è¯å†å²</h2>
            <button onclick="showHistory()">æŸ¥çœ‹å†å²è®°å½•</button>
            <button onclick="clearHistory()">æ¸…ç©ºå†å²</button>
            <div id="historyOutput" class="output">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹...</div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ æ¨¡æ‹Ÿåœºæ™¯æµ‹è¯•</h2>
            <button onclick="simulateScenario('morning')">æ¨¡æ‹Ÿæ—©æ™¨åœºæ™¯</button>
            <button onclick="simulateScenario('afternoon')">æ¨¡æ‹Ÿä¸‹åˆåœºæ™¯</button>
            <button onclick="simulateScenario('evening')">æ¨¡æ‹Ÿå‚æ™šåœºæ™¯</button>
            <div id="scenarioOutput" class="output">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
        </div>
    </div>

    <script src="js/index.js"></script>
    <script>
        // åˆå§‹åŒ–å¯¹è¯ç”Ÿæˆå™¨ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
        if (typeof ahriDialogue === 'undefined') {
            const ahriDialogue = new AhriDialogueGenerator();
        }

        // æ›´æ–°ä¸Šä¸‹æ–‡æ˜¾ç¤º
        function updateContextDisplay() {
            const context = ahriDialogue.contextData;
            const info = `
                <strong>ä»Šæ—¥å–æ°´æ¬¡æ•°:</strong> ${context.todayCount} æ¬¡<br>
                <strong>ç´¯è®¡å–æ°´æ¬¡æ•°:</strong> ${context.totalCount} æ¬¡<br>
                <strong>å½“å‰æ—¶é—´æ®µ:</strong> ${context.timeOfDay}<br>
                <strong>ä¸Šæ¬¡å–æ°´æ—¶é—´:</strong> ${context.lastDrinkTime ? new Date(context.lastDrinkTime).toLocaleString() : 'æ— '}<br>
                <strong>å¯¹è¯å†å²æ•°é‡:</strong> ${ahriDialogue.dialogueHistory.length} æ¡
            `;
            document.getElementById('contextInfo').innerHTML = info;
        }

        // æµ‹è¯•ç‚¹å‡»å¯¹è¯
        function testClickDialogue() {
            const dialogue = ahriDialogue.generateDialogue('click');
            document.getElementById('clickOutput').innerHTML = `<strong>é˜¿ç‹¸:</strong> "${dialogue}"`;
            updateContextDisplay();
        }

        // æµ‹è¯•å¤šæ¬¡ç‚¹å‡»
        function testMultipleClicks() {
            let output = '<strong>è¿ç»­10æ¬¡ç‚¹å‡»å¯¹è¯:</strong><br><br>';
            for (let i = 1; i <= 10; i++) {
                const dialogue = ahriDialogue.generateDialogue('click');
                output += `${i}. ${dialogue}<br>`;
            }
            document.getElementById('clickOutput').innerHTML = output;
            updateContextDisplay();
        }

        // æµ‹è¯•æé†’å¯¹è¯
        function testReminderDialogue() {
            const dialogue = ahriDialogue.generateDialogue('reminder');
            document.getElementById('reminderOutput').innerHTML = `<strong>é˜¿ç‹¸:</strong> "${dialogue}"`;
            updateContextDisplay();
        }

        // æµ‹è¯•å¤šæ¬¡æé†’
        function testMultipleReminders() {
            let output = '<strong>è¿ç»­10æ¬¡æé†’å¯¹è¯:</strong><br><br>';
            for (let i = 1; i <= 10; i++) {
                const dialogue = ahriDialogue.generateDialogue('reminder');
                output += `${i}. ${dialogue}<br>`;
            }
            document.getElementById('reminderOutput').innerHTML = output;
            updateContextDisplay();
        }

        // æµ‹è¯•æ¬¢è¿å¯¹è¯
        function testWelcomeDialogue() {
            const dialogue = ahriDialogue.generateDialogue('welcome');
            document.getElementById('welcomeOutput').innerHTML = `<strong>é˜¿ç‹¸:</strong> "${dialogue}"`;
            updateContextDisplay();
        }

        // æµ‹è¯•æ‰“å¡åå¯¹è¯
        function testAfterDrinkDialogue() {
            const dialogue = ahriDialogue.generateDialogue('afterDrink');
            document.getElementById('afterDrinkOutput').innerHTML = `<strong>é˜¿ç‹¸:</strong> "${dialogue}"`;
            updateContextDisplay();
        }

        // æ˜¾ç¤ºå†å²è®°å½•
        function showHistory() {
            const history = ahriDialogue.dialogueHistory;
            if (history.length === 0) {
                document.getElementById('historyOutput').innerHTML = 'æš‚æ— å†å²è®°å½•';
                return;
            }
            let output = '<strong>æœ€è¿‘çš„å¯¹è¯å†å²:</strong><br><br>';
            history.slice(-10).reverse().forEach((item, index) => {
                const time = new Date(item.timestamp).toLocaleTimeString();
                output += `${index + 1}. [${time}] [${item.type}] ${item.dialogue}<br>`;
            });
            document.getElementById('historyOutput').innerHTML = output;
        }

        // æ¸…ç©ºå†å²
        function clearHistory() {
            ahriDialogue.dialogueHistory = [];
            document.getElementById('historyOutput').innerHTML = 'å†å²è®°å½•å·²æ¸…ç©º';
            updateContextDisplay();
        }

        // æ¨¡æ‹Ÿåœºæ™¯
        function simulateScenario(scenario) {
            let output = `<strong>æ¨¡æ‹Ÿ${scenario}åœºæ™¯:</strong><br><br>`;
            
            // æ¨¡æ‹Ÿä¸åŒçš„å–æ°´æ¬¡æ•°
            const counts = [0, 2, 5, 8, 12];
            counts.forEach(count => {
                ahriDialogue.updateContext({ todayCount: count });
                const dialogue = ahriDialogue.generateDialogue('click');
                output += `å–æ°´${count}æ¬¡: ${dialogue}<br>`;
            });
            
            document.getElementById('scenarioOutput').innerHTML = output;
            updateContextDisplay();
        }

        // é¡µé¢åŠ è½½æ—¶æ›´æ–°ä¸Šä¸‹æ–‡
        updateContextDisplay();
        setInterval(updateContextDisplay, 5000); // æ¯5ç§’æ›´æ–°ä¸€æ¬¡
    </script>
</body>
</html>
